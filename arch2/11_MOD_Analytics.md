# MOD-007: æ•°æ®åˆ†æä¸æŠ¥è¡¨ - æŠ€æœ¯è®¾è®¡æ–‡æ¡£

**æ¨¡å—ç¼–å·:** MOD-007
**æ¨¡å—åç§°:** æ•°æ®åˆ†æä¸æŠ¥è¡¨
**æ–‡æ¡£ç‰ˆæœ¬:** 2.0
**åˆ›å»ºæ—¥æœŸ:** 2026-02-03
**é¢„ä¼°å·¥æ—¶:** 8å¤©
**ä¼˜å…ˆçº§:** P0ï¼ˆMVPæ ¸å¿ƒåŠŸèƒ½ï¼‰
**ä¾èµ–é¡¹:** MOD-001 (åŸºç¡€è®°è´¦), MOD-003 (åŒè½¨è´¦æœ¬)

---

## ğŸ“‹ ç›®å½•

1. [æ¨¡å—æ¦‚è¿°](#æ¨¡å—æ¦‚è¿°)
2. [ä¸šåŠ¡ä»·å€¼](#ä¸šåŠ¡ä»·å€¼)
3. [æ ¸å¿ƒåŠŸèƒ½](#æ ¸å¿ƒåŠŸèƒ½)
4. [åŠŸèƒ½éœ€æ±‚](#åŠŸèƒ½éœ€æ±‚)
5. [æŠ€æœ¯è®¾è®¡](#æŠ€æœ¯è®¾è®¡)
6. [æ•°æ®æ¨¡å‹](#æ•°æ®æ¨¡å‹)
7. [æ ¸å¿ƒå®ç°æµç¨‹](#æ ¸å¿ƒå®ç°æµç¨‹)
8. [UIç»„ä»¶è®¾è®¡](#uiç»„ä»¶è®¾è®¡)
9. [æµ‹è¯•ç­–ç•¥](#æµ‹è¯•ç­–ç•¥)
10. [æ€§èƒ½ä¼˜åŒ–](#æ€§èƒ½ä¼˜åŒ–)

---

## æ¨¡å—æ¦‚è¿°

### ä¸šåŠ¡ä»·å€¼

æ•°æ®åˆ†ææ¨¡å—é€šè¿‡å¯è§†åŒ–æŠ¥è¡¨å’Œå›¾è¡¨å°†åŸå§‹äº¤æ˜“æ•°æ®è½¬åŒ–ä¸ºå¯æ“ä½œçš„æ´å¯Ÿ:

- **æœˆåº¦æŠ¥è¡¨ (A01):** å…¨é¢çš„æœˆæœ«è´¢åŠ¡æ‘˜è¦
- **åˆ†ç±»æ˜ç»†:** é¥¼å›¾æ˜¾ç¤ºæ”¯å‡ºåˆ†å¸ƒ
- **æ”¯å‡ºè¶‹åŠ¿:** æŠ˜çº¿å›¾è¿½è¸ªæœˆåº¦æ¨¡å¼
- **é¢„ç®—è·Ÿè¸ª:** è¿›åº¦æ¡å’Œé¢„ç®—é™åˆ¶æé†’
- **äº¤äº’å¼å›¾è¡¨:** ç‚¹å‡»æ·±å…¥æŸ¥çœ‹è¯¦æƒ…

### æ¶æ„ä½ç½®

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           è¡¨ç°å±‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ æœˆåº¦æŠ¥è¡¨     â”‚  â”‚  åˆ†ç±»å›¾è¡¨ç»„ä»¶        â”‚    â”‚
â”‚  â”‚ ç•Œé¢         â”‚  â”‚                      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ è¶‹åŠ¿å›¾è¡¨     â”‚  â”‚  é¢„ç®—è¿›åº¦ç»„ä»¶        â”‚    â”‚
â”‚  â”‚ ç»„ä»¶         â”‚  â”‚                      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â†“â†‘
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           ä¸šåŠ¡é€»è¾‘å±‚                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ æœˆåº¦æŠ¥è¡¨     â”‚  â”‚  åˆ†ç±»ç»Ÿè®¡ç”¨ä¾‹        â”‚    â”‚
â”‚  â”‚ ç”¨ä¾‹         â”‚  â”‚                      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ è¶‹åŠ¿åˆ†æ     â”‚  â”‚  é¢„ç®—è·Ÿè¸ªç”¨ä¾‹        â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â†“â†‘
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            æ•°æ®å±‚                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ äº¤æ˜“ä»“å‚¨     â”‚  â”‚  ç»Ÿè®¡ç¼“å­˜ä»“å‚¨        â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ä¸šåŠ¡ä»·å€¼

### ç”¨æˆ·ç—›ç‚¹

**ç›®æ ‡ç”¨æˆ·:** ç”°ä¸­(35å²)å’Œç¾æƒ (33å²)å¤«å¦‡ç®¡ç†å®¶åº­è´¢åŠ¡

**ç—›ç‚¹:**
1. **ç¼ºä¹æ¸…æ™°æ¦‚è§ˆ:** "è¿™ä¸ªæœˆçš„é’±éƒ½èŠ±å“ªå„¿äº†?"
2. **é¢„ç®—ç›²ç‚¹:** "æˆ‘ä»¬åˆåœ¨å¤–å‡ºå°±é¤ä¸Šè¶…æ”¯äº†,å´æ²¡æ³¨æ„åˆ°"
3. **è¶‹åŠ¿æ— çŸ¥:** "æˆ‘ä»¬çš„æ”¯å‡ºæ¯”ä¸Šä¸ªæœˆå¤šè¿˜æ˜¯å°‘?"
4. **åˆ†ç±»å›°æƒ‘:** "å“ªä¸ªåˆ†ç±»æ¶ˆè€—äº†æˆ‘ä»¬æœ€å¤šçš„é¢„ç®—?"

**è§£å†³æ–¹æ¡ˆ:**
- è‡ªåŠ¨ç”Ÿæˆçš„æœˆåº¦æŠ¥è¡¨,æ¸…æ™°æ‘˜è¦
- å¯è§†åŒ–åˆ†ç±»é¥¼å›¾(å³æ—¶æŸ¥çœ‹æ¯”ä¾‹)
- æœˆåº¦åŒæ¯”è¶‹åŠ¿æŠ˜çº¿å›¾
- è¶…æ”¯å‰çš„å®æ—¶é¢„ç®—æé†’

### æˆåŠŸæŒ‡æ ‡

| æŒ‡æ ‡ | ç›®æ ‡ | æµ‹é‡æ–¹å¼ |
|------|------|----------|
| æŠ¥è¡¨ç”Ÿæˆæ—¶é—´ | <2s | 1000æ¡äº¤æ˜“ |
| å›¾è¡¨æ¸²æŸ“æ—¶é—´ | <500ms | æ•°æ®åˆ°å¯è§†åŒ– |
| ç”¨æˆ·æŠ¥è¡¨æŸ¥çœ‹ç‡ | >80% | æœˆæ´»è·ƒç”¨æˆ· |
| é¢„ç®—æé†’æœ‰æ•ˆæ€§ | >70% | è°ƒæ•´æ”¯å‡ºçš„ç”¨æˆ· |

---

## æ ¸å¿ƒåŠŸèƒ½

### åŠŸèƒ½çŸ©é˜µ

| åŠŸèƒ½ID | åŠŸèƒ½åç§° | ä¼˜å…ˆçº§ | å¤æ‚åº¦ |
|--------|----------|--------|--------|
| A01 | æœˆåº¦æŠ¥è¡¨ç”Ÿæˆ | P0 | ä¸­ |
| A01-CAT | åˆ†ç±»æ˜ç»†å›¾è¡¨ | P0 | ä½ |
| A01-TREND | æ”¯å‡ºè¶‹åŠ¿å›¾è¡¨ | P0 | ä¸­ |
| A01-BUDGET | é¢„ç®—è·Ÿè¸ªä¸æé†’ | P0 | ä¸­ |
| A01-EXPORT | å¯¼å‡ºPDFæŠ¥è¡¨ | P1 | ä½ |
| A02 | è‡ªå®šä¹‰æ—¥æœŸèŒƒå›´æŠ¥è¡¨ | P1 | ä¸­ |
| A03 | å¯¹æ¯”æŠ¥è¡¨ | P2 | é«˜ |

---

## åŠŸèƒ½éœ€æ±‚

### ç”¨æˆ·æ•…äº‹

**ä½œä¸º** æœˆæœ«ç”¨æˆ·
**æˆ‘å¸Œæœ›** æŸ¥çœ‹å…¨é¢çš„æœˆåº¦æŠ¥è¡¨
**ä»¥ä¾¿** æ¸…æ¥šäº†è§£æˆ‘çš„è´¢åŠ¡çŠ¶å†µ

**éªŒæ”¶æ ‡å‡†:**
- æœˆæœ«è‡ªåŠ¨ç”ŸæˆæŠ¥è¡¨
- æ˜¾ç¤ºæ€»æ”¶å…¥ã€æ”¯å‡ºã€å‚¨è“„
- æŒ‰åˆ†ç±»åˆ†è§£å¹¶æ˜¾ç¤ºç™¾åˆ†æ¯”
- çªå‡ºæ˜¾ç¤ºå‰3å¤§æ”¯å‡ºåˆ†ç±»
- ä¸ä¸Šæœˆå¯¹æ¯”

---

## æŠ€æœ¯è®¾è®¡

### æœˆåº¦æŠ¥è¡¨ç”Ÿæˆæ¶æ„

```
ç”¨æˆ·è¯·æ±‚æŠ¥è¡¨
    â†“
GetMonthlyReportUseCase.execute(year, month)
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. æŸ¥è¯¢äº¤æ˜“                         â”‚
â”‚    - æŒ‰å¹´/æœˆè¿‡æ»¤                    â”‚
â”‚    - æŒ‰è´¦æœ¬ç±»å‹åˆ†ç»„                 â”‚
â”‚    - è®¡ç®—æ€»è®¡                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. åˆ†ç±»ç»Ÿè®¡                         â”‚
â”‚    - æŒ‰åˆ†ç±»æ±‚å’Œ                     â”‚
â”‚    - è®¡ç®—ç™¾åˆ†æ¯”                     â”‚
â”‚    - æŒ‰é‡‘é¢æ’åº(é™åº)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. è¶‹åŠ¿åˆ†æ                         â”‚
â”‚    - ä¸ä¸Šæœˆå¯¹æ¯”                     â”‚
â”‚    - è®¡ç®—å˜åŒ–ç™¾åˆ†æ¯”                 â”‚
â”‚    - è¯†åˆ«å¼‚å¸¸                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
è¿”å›MonthlyReport
```

---

## æ•°æ®æ¨¡å‹

### é¢†åŸŸæ¨¡å‹

```dart
// lib/features/analytics/domain/models/monthly_report.dart

import 'package:freezed_annotation/freezed_annotation.dart';

part 'monthly_report.freezed.dart';

@freezed
class MonthlyReport with _$MonthlyReport {
  const factory MonthlyReport({
    required int year,
    required int month,
    required int totalIncome,
    required int totalExpenses,
    required int savings,
    required double savingsRate,
    required List<CategoryBreakdown> categoryBreakdowns,
    required List<DailyExpense> dailyExpenses,
    MonthComparison? previousMonthComparison,
  }) = _MonthlyReport;
}

@freezed
class CategoryBreakdown with _$CategoryBreakdown {
  const factory CategoryBreakdown({
    required String categoryId,
    required String categoryName,
    required String icon,
    required int amount,
    required double percentage,
    required int transactionCount,
    int? budgetAmount,
    double? budgetProgress,
  }) = _CategoryBreakdown;
}

@freezed
class DailyExpense with _$DailyExpense {
  const factory DailyExpense({
    required DateTime date,
    required int amount,
  }) = _DailyExpense;
}

@freezed
class MonthComparison with _$MonthComparison {
  const factory MonthComparison({
    required int previousMonth,
    required int previousYear,
    required int previousIncome,
    required int previousExpenses,
    required double incomeChange,
    required double expenseChange,
  }) = _MonthComparison;
}
```

```dart
// lib/features/analytics/domain/models/budget_progress.dart

import 'package:freezed_annotation/freezed_annotation.dart';

part 'budget_progress.freezed.dart';

enum BudgetStatus {
  safe,      // < 80%
  warning,   // 80-99%
  exceeded,  // >= 100%
}

@freezed
class BudgetProgress with _$BudgetProgress {
  const factory BudgetProgress({
    required String categoryId,
    required String categoryName,
    required int budgetAmount,
    required int spentAmount,
    required double percentage,
    required BudgetStatus status,
    required int remainingAmount,
  }) = _BudgetProgress;
}
```

---

## æ ¸å¿ƒå®ç°æµç¨‹

### 1. æœˆåº¦æŠ¥è¡¨ç”¨ä¾‹å®ç°

```dart
// lib/features/analytics/application/use_cases/get_monthly_report_use_case.dart

import 'package:riverpod_annotation/riverpod_annotation.dart';
import '../../../transaction/domain/repositories/transaction_repository.dart';
import '../../../category/domain/repositories/category_repository.dart';
import '../../domain/models/monthly_report.dart';

part 'get_monthly_report_use_case.g.dart';

class GetMonthlyReportUseCase {
  final TransactionRepository _transactionRepo;
  final CategoryRepository _categoryRepo;

  GetMonthlyReportUseCase({
    required TransactionRepository transactionRepo,
    required CategoryRepository categoryRepo,
  })  : _transactionRepo = transactionRepo,
        _categoryRepo = categoryRepo;

  Future<MonthlyReport> execute({
    required String bookId,
    required int year,
    required int month,
  }) async {
    // 1. Get date range
    final startDate = DateTime(year, month, 1);
    final endDate = DateTime(year, month + 1, 0, 23, 59, 59);

    // 2. Query transactions
    final transactions = await _transactionRepo.getTransactionsByDateRange(
      bookId: bookId,
      startDate: startDate,
      endDate: endDate,
    );

    // 3. Calculate totals
    int totalIncome = 0;
    int totalExpenses = 0;

    for (final tx in transactions) {
      if (tx.type == TransactionType.income) {
        totalIncome += tx.amount;
      } else if (tx.type == TransactionType.expense) {
        totalExpenses += tx.amount;
      }
    }

    final savings = totalIncome - totalExpenses;
    final savingsRate = totalIncome > 0
        ? (savings / totalIncome * 100)
        : 0.0;

    // 4. Category breakdown
    final categoryBreakdowns = await _calculateCategoryBreakdowns(
      transactions: transactions,
      totalExpenses: totalExpenses,
    );

    // 5. Daily expenses for trend chart
    final dailyExpenses = _calculateDailyExpenses(
      transactions: transactions,
      year: year,
      month: month,
    );

    // 6. Previous month comparison
    final previousMonthComparison = await _getPreviousMonthComparison(
      bookId: bookId,
      currentYear: year,
      currentMonth: month,
      currentIncome: totalIncome,
      currentExpenses: totalExpenses,
    );

    return MonthlyReport(
      year: year,
      month: month,
      totalIncome: totalIncome,
      totalExpenses: totalExpenses,
      savings: savings,
      savingsRate: savingsRate,
      categoryBreakdowns: categoryBreakdowns,
      dailyExpenses: dailyExpenses,
      previousMonthComparison: previousMonthComparison,
    );
  }

  Future<List<CategoryBreakdown>> _calculateCategoryBreakdowns({
    required List<Transaction> transactions,
    required int totalExpenses,
  }) async {
    // Group by category
    final Map<String, int> categoryTotals = {};
    final Map<String, int> categoryCount = {};

    for (final tx in transactions) {
      if (tx.type == TransactionType.expense) {
        categoryTotals[tx.categoryId] =
            (categoryTotals[tx.categoryId] ?? 0) + tx.amount;
        categoryCount[tx.categoryId] =
            (categoryCount[tx.categoryId] ?? 0) + 1;
      }
    }

    // Build breakdowns
    final List<CategoryBreakdown> breakdowns = [];
    for (final entry in categoryTotals.entries) {
      final category = await _categoryRepo.getCategoryById(entry.key);
      if (category == null) continue;

      final percentage = totalExpenses > 0
          ? (entry.value / totalExpenses * 100)
          : 0.0;

      breakdowns.add(CategoryBreakdown(
        categoryId: entry.key,
        categoryName: category.name,
        icon: category.icon,
        amount: entry.value,
        percentage: percentage,
        transactionCount: categoryCount[entry.key] ?? 0,
        budgetAmount: category.budgetAmount,
        budgetProgress: category.budgetAmount != null
            ? (entry.value / category.budgetAmount! * 100)
            : null,
      ));
    }

    // Sort by amount descending
    breakdowns.sort((a, b) => b.amount.compareTo(a.amount));

    return breakdowns;
  }

  List<DailyExpense> _calculateDailyExpenses({
    required List<Transaction> transactions,
    required int year,
    required int month,
  }) {
    final daysInMonth = DateTime(year, month + 1, 0).day;
    final Map<int, int> dailyTotals = {};

    // Initialize all days to 0
    for (int day = 1; day <= daysInMonth; day++) {
      dailyTotals[day] = 0;
    }

    // Sum expenses by day
    for (final tx in transactions) {
      if (tx.type == TransactionType.expense) {
        final day = tx.timestamp.day;
        dailyTotals[day] = (dailyTotals[day] ?? 0) + tx.amount;
      }
    }

    // Convert to list
    return List.generate(daysInMonth, (index) {
      final day = index + 1;
      return DailyExpense(
        date: DateTime(year, month, day),
        amount: dailyTotals[day] ?? 0,
      );
    });
  }

  Future<MonthComparison?> _getPreviousMonthComparison({
    required String bookId,
    required int currentYear,
    required int currentMonth,
    required int currentIncome,
    required int currentExpenses,
  }) async {
    // Calculate previous month
    int prevYear = currentYear;
    int prevMonth = currentMonth - 1;
    if (prevMonth < 1) {
      prevMonth = 12;
      prevYear--;
    }

    final startDate = DateTime(prevYear, prevMonth, 1);
    final endDate = DateTime(prevYear, prevMonth + 1, 0, 23, 59, 59);

    final prevTransactions = await _transactionRepo.getTransactionsByDateRange(
      bookId: bookId,
      startDate: startDate,
      endDate: endDate,
    );

    int prevIncome = 0;
    int prevExpenses = 0;

    for (final tx in prevTransactions) {
      if (tx.type == TransactionType.income) {
        prevIncome += tx.amount;
      } else if (tx.type == TransactionType.expense) {
        prevExpenses += tx.amount;
      }
    }

    if (prevIncome == 0 && prevExpenses == 0) {
      return null; // No previous data
    }

    final incomeChange = prevIncome > 0
        ? ((currentIncome - prevIncome) / prevIncome * 100)
        : 0.0;

    final expenseChange = prevExpenses > 0
        ? ((currentExpenses - prevExpenses) / prevExpenses * 100)
        : 0.0;

    return MonthComparison(
      previousMonth: prevMonth,
      previousYear: prevYear,
      previousIncome: prevIncome,
      previousExpenses: prevExpenses,
      incomeChange: incomeChange,
      expenseChange: expenseChange,
    );
  }
}

@riverpod
GetMonthlyReportUseCase getMonthlyReportUseCase(
  GetMonthlyReportUseCaseRef ref,
) {
  return GetMonthlyReportUseCase(
    transactionRepo: ref.watch(transactionRepositoryProvider),
    categoryRepo: ref.watch(categoryRepositoryProvider),
  );
}

@riverpod
Future<MonthlyReport> monthlyReport(
  MonthlyReportRef ref, {
  required String bookId,
  required int year,
  required int month,
}) async {
  final useCase = ref.watch(getMonthlyReportUseCaseProvider);
  return await useCase.execute(
    bookId: bookId,
    year: year,
    month: month,
  );
}
```

### 2. é¢„ç®—è·Ÿè¸ªç”¨ä¾‹å®ç°

```dart
// lib/features/analytics/application/use_cases/get_budget_progress_use_case.dart

import 'package:riverpod_annotation/riverpod_annotation.dart';
import '../../../transaction/domain/repositories/transaction_repository.dart';
import '../../../category/domain/repositories/category_repository.dart';
import '../../domain/models/budget_progress.dart';

part 'get_budget_progress_use_case.g.dart';

class GetBudgetProgressUseCase {
  final TransactionRepository _transactionRepo;
  final CategoryRepository _categoryRepo;

  GetBudgetProgressUseCase({
    required TransactionRepository transactionRepo,
    required CategoryRepository categoryRepo,
  })  : _transactionRepo = transactionRepo,
        _categoryRepo = categoryRepo;

  Future<List<BudgetProgress>> execute({
    required String bookId,
    required int year,
    required int month,
  }) async {
    // 1. Get categories with budgets
    final categories = await _categoryRepo.getCategoriesWithBudget();

    if (categories.isEmpty) {
      return [];
    }

    // 2. Get current month transactions
    final startDate = DateTime(year, month, 1);
    final endDate = DateTime(year, month + 1, 0, 23, 59, 59);

    final transactions = await _transactionRepo.getTransactionsByDateRange(
      bookId: bookId,
      startDate: startDate,
      endDate: endDate,
    );

    // 3. Calculate spending by category
    final Map<String, int> categorySpending = {};
    for (final tx in transactions) {
      if (tx.type == TransactionType.expense) {
        categorySpending[tx.categoryId] =
            (categorySpending[tx.categoryId] ?? 0) + tx.amount;
      }
    }

    // 4. Build budget progress list
    final List<BudgetProgress> progressList = [];

    for (final category in categories) {
      if (category.budgetAmount == null) continue;

      final spentAmount = categorySpending[category.id] ?? 0;
      final percentage = (spentAmount / category.budgetAmount! * 100);
      final remainingAmount = category.budgetAmount! - spentAmount;

      BudgetStatus status;
      if (percentage >= 100) {
        status = BudgetStatus.exceeded;
      } else if (percentage >= 80) {
        status = BudgetStatus.warning;
      } else {
        status = BudgetStatus.safe;
      }

      progressList.add(BudgetProgress(
        categoryId: category.id,
        categoryName: category.name,
        budgetAmount: category.budgetAmount!,
        spentAmount: spentAmount,
        percentage: percentage,
        status: status,
        remainingAmount: remainingAmount,
      ));
    }

    // Sort by percentage descending (most at risk first)
    progressList.sort((a, b) => b.percentage.compareTo(a.percentage));

    return progressList;
  }
}

@riverpod
GetBudgetProgressUseCase getBudgetProgressUseCase(
  GetBudgetProgressUseCaseRef ref,
) {
  return GetBudgetProgressUseCase(
    transactionRepo: ref.watch(transactionRepositoryProvider),
    categoryRepo: ref.watch(categoryRepositoryProvider),
  );
}

@riverpod
Future<List<BudgetProgress>> budgetProgressList(
  BudgetProgressListRef ref, {
  required String bookId,
  required int year,
  required int month,
}) async {
  final useCase = ref.watch(getBudgetProgressUseCaseProvider);
  return await useCase.execute(
    bookId: bookId,
    year: year,
    month: month,
  );
}
```

---

## UIç»„ä»¶è®¾è®¡

### 1. æœˆåº¦æŠ¥è¡¨ç•Œé¢

```dart
// lib/features/analytics/presentation/screens/monthly_report_screen.dart

import 'package:flutter/material.dart';
import 'package:flutter_riverpod/flutter_riverpod.dart';
import 'package:fl_chart/fl_chart.dart';
import '../../application/use_cases/get_monthly_report_use_case.dart';
import '../../domain/models/monthly_report.dart';

class MonthlyReportScreen extends ConsumerStatefulWidget {
  final String bookId;

  const MonthlyReportScreen({
    super.key,
    required this.bookId,
  });

  @override
  ConsumerState<MonthlyReportScreen> createState() =>
      _MonthlyReportScreenState();
}

class _MonthlyReportScreenState extends ConsumerState<MonthlyReportScreen> {
  late DateTime _selectedDate;

  @override
  void initState() {
    super.initState();
    _selectedDate = DateTime.now();
  }

  @override
  Widget build(BuildContext context) {
    final reportAsync = ref.watch(monthlyReportProvider(
      bookId: widget.bookId,
      year: _selectedDate.year,
      month: _selectedDate.month,
    ));

    return Scaffold(
      appBar: AppBar(
        title: const Text('æœˆåº¦æŠ¥è¡¨'),
        actions: [
          IconButton(
            icon: const Icon(Icons.chevron_left),
            onPressed: _previousMonth,
          ),
          TextButton(
            onPressed: _selectMonth,
            child: Text(
              '${_selectedDate.year}å¹´${_selectedDate.month}æœˆ',
              style: const TextStyle(fontSize: 16),
            ),
          ),
          IconButton(
            icon: const Icon(Icons.chevron_right),
            onPressed: _nextMonth,
          ),
        ],
      ),
      body: reportAsync.when(
        data: (report) => _buildReport(report),
        loading: () => const Center(child: CircularProgressIndicator()),
        error: (error, stack) => Center(child: Text('é”™è¯¯: $error')),
      ),
    );
  }

  Widget _buildReport(MonthlyReport report) {
    return SingleChildScrollView(
      padding: const EdgeInsets.all(16),
      child: Column(
        crossAxisAlignment: CrossAxisAlignment.start,
        children: [
          _buildSummaryCards(report),
          const SizedBox(height: 24),
          _buildCategoryPieChart(report),
          const SizedBox(height: 24),
          _buildExpenseTrendChart(report),
          const SizedBox(height: 24),
          _buildCategoryBreakdownList(report),
          const SizedBox(height: 24),
          if (report.previousMonthComparison != null)
            _buildMonthComparison(report.previousMonthComparison!),
        ],
      ),
    );
  }

  Widget _buildSummaryCards(MonthlyReport report) {
    return Column(
      children: [
        Row(
          children: [
            Expanded(
              child: _SummaryCard(
                title: 'æ”¶å…¥',
                amount: report.totalIncome,
                color: Colors.green,
                icon: Icons.arrow_downward,
              ),
            ),
            const SizedBox(width: 12),
            Expanded(
              child: _SummaryCard(
                title: 'æ”¯å‡º',
                amount: report.totalExpenses,
                color: Colors.red,
                icon: Icons.arrow_upward,
              ),
            ),
          ],
        ),
        const SizedBox(height: 12),
        Row(
          children: [
            Expanded(
              child: _SummaryCard(
                title: 'ç»“ä½™',
                amount: report.savings,
                color: report.savings >= 0 ? Colors.blue : Colors.orange,
                icon: Icons.savings,
              ),
            ),
            const SizedBox(width: 12),
            Expanded(
              child: _PercentageCard(
                title: 'å‚¨è“„ç‡',
                percentage: report.savingsRate,
              ),
            ),
          ],
        ),
      ],
    );
  }

  Widget _buildCategoryPieChart(MonthlyReport report) {
    if (report.categoryBreakdowns.isEmpty) {
      return const SizedBox.shrink();
    }

    return Card(
      child: Padding(
        padding: const EdgeInsets.all(16),
        child: Column(
          crossAxisAlignment: CrossAxisAlignment.start,
          children: [
            const Text(
              'æ”¯å‡ºåˆ†å¸ƒ',
              style: TextStyle(fontSize: 18, fontWeight: FontWeight.bold),
            ),
            const SizedBox(height: 16),
            SizedBox(
              height: 250,
              child: PieChart(
                PieChartData(
                  sections: report.categoryBreakdowns.take(5).map((breakdown) {
                    return PieChartSectionData(
                      value: breakdown.amount.toDouble(),
                      title: '${breakdown.percentage.toStringAsFixed(1)}%',
                      radius: 100,
                      titleStyle: const TextStyle(
                        fontSize: 14,
                        fontWeight: FontWeight.bold,
                        color: Colors.white,
                      ),
                    );
                  }).toList(),
                  sectionsSpace: 2,
                  centerSpaceRadius: 40,
                ),
              ),
            ),
          ],
        ),
      ),
    );
  }

  Widget _buildExpenseTrendChart(MonthlyReport report) {
    return Card(
      child: Padding(
        padding: const EdgeInsets.all(16),
        child: Column(
          crossAxisAlignment: CrossAxisAlignment.start,
          children: [
            const Text(
              'æ”¯å‡ºè¶‹åŠ¿',
              style: TextStyle(fontSize: 18, fontWeight: FontWeight.bold),
            ),
            const SizedBox(height: 16),
            SizedBox(
              height: 200,
              child: LineChart(
                LineChartData(
                  gridData: const FlGridData(show: true),
                  titlesData: FlTitlesData(
                    bottomTitles: AxisTitles(
                      sideTitles: SideTitles(
                        showTitles: true,
                        interval: 5,
                        getTitlesWidget: (value, meta) {
                          return Text('${value.toInt()}æ—¥');
                        },
                      ),
                    ),
                    leftTitles: const AxisTitles(
                      sideTitles: SideTitles(showTitles: true),
                    ),
                    topTitles: const AxisTitles(
                      sideTitles: SideTitles(showTitles: false),
                    ),
                    rightTitles: const AxisTitles(
                      sideTitles: SideTitles(showTitles: false),
                    ),
                  ),
                  borderData: FlBorderData(show: true),
                  lineBarsData: [
                    LineChartBarData(
                      spots: report.dailyExpenses.asMap().entries.map((entry) {
                        return FlSpot(
                          (entry.key + 1).toDouble(),
                          entry.value.amount.toDouble(),
                        );
                      }).toList(),
                      isCurved: true,
                      color: Colors.red,
                      barWidth: 3,
                      dotData: const FlDotData(show: false),
                      belowBarData: BarAreaData(
                        show: true,
                        color: Colors.red.withOpacity(0.1),
                      ),
                    ),
                  ],
                ),
              ),
            ),
          ],
        ),
      ),
    );
  }

  Widget _buildCategoryBreakdownList(MonthlyReport report) {
    return Card(
      child: Padding(
        padding: const EdgeInsets.all(16),
        child: Column(
          crossAxisAlignment: CrossAxisAlignment.start,
          children: [
            const Text(
              'åˆ†ç±»æ˜ç»†',
              style: TextStyle(fontSize: 18, fontWeight: FontWeight.bold),
            ),
            const SizedBox(height: 12),
            ...report.categoryBreakdowns.map((breakdown) {
              return _CategoryBreakdownItem(breakdown: breakdown);
            }),
          ],
        ),
      ),
    );
  }

  Widget _buildMonthComparison(MonthComparison comparison) {
    return Card(
      child: Padding(
        padding: const EdgeInsets.all(16),
        child: Column(
          crossAxisAlignment: CrossAxisAlignment.start,
          children: [
            Text(
              'ä¸ä¸Šæœˆå¯¹æ¯” (${comparison.previousYear}å¹´${comparison.previousMonth}æœˆ)',
              style: const TextStyle(fontSize: 18, fontWeight: FontWeight.bold),
            ),
            const SizedBox(height: 12),
            _ComparisonRow(
              label: 'æ”¶å…¥å˜åŒ–',
              change: comparison.incomeChange,
            ),
            const SizedBox(height: 8),
            _ComparisonRow(
              label: 'æ”¯å‡ºå˜åŒ–',
              change: comparison.expenseChange,
            ),
          ],
        ),
      ),
    );
  }

  void _previousMonth() {
    setState(() {
      _selectedDate = DateTime(_selectedDate.year, _selectedDate.month - 1);
    });
  }

  void _nextMonth() {
    setState(() {
      _selectedDate = DateTime(_selectedDate.year, _selectedDate.month + 1);
    });
  }

  void _selectMonth() async {
    // TODO: Show month picker dialog
  }
}

// Helper Widgets

class _SummaryCard extends StatelessWidget {
  final String title;
  final int amount;
  final Color color;
  final IconData icon;

  const _SummaryCard({
    required this.title,
    required this.amount,
    required this.color,
    required this.icon,
  });

  @override
  Widget build(BuildContext context) {
    return Card(
      child: Padding(
        padding: const EdgeInsets.all(16),
        child: Column(
          crossAxisAlignment: CrossAxisAlignment.start,
          children: [
            Row(
              children: [
                Icon(icon, color: color, size: 20),
                const SizedBox(width: 8),
                Text(
                  title,
                  style: TextStyle(
                    fontSize: 14,
                    color: Colors.grey[600],
                  ),
                ),
              ],
            ),
            const SizedBox(height: 8),
            Text(
              'Â¥${_formatAmount(amount)}',
              style: TextStyle(
                fontSize: 24,
                fontWeight: FontWeight.bold,
                color: color,
              ),
            ),
          ],
        ),
      ),
    );
  }

  String _formatAmount(int amount) {
    return amount.abs().toString().replaceAllMapped(
          RegExp(r'(\d{1,3})(?=(\d{3})+(?!\d))'),
          (Match m) => '${m[1]},',
        );
  }
}

class _PercentageCard extends StatelessWidget {
  final String title;
  final double percentage;

  const _PercentageCard({
    required this.title,
    required this.percentage,
  });

  @override
  Widget build(BuildContext context) {
    return Card(
      child: Padding(
        padding: const EdgeInsets.all(16),
        child: Column(
          crossAxisAlignment: CrossAxisAlignment.start,
          children: [
            Text(
              title,
              style: TextStyle(
                fontSize: 14,
                color: Colors.grey[600],
              ),
            ),
            const SizedBox(height: 8),
            Text(
              '${percentage.toStringAsFixed(1)}%',
              style: const TextStyle(
                fontSize: 24,
                fontWeight: FontWeight.bold,
                color: Colors.blue,
              ),
            ),
          ],
        ),
      ),
    );
  }
}

class _CategoryBreakdownItem extends StatelessWidget {
  final CategoryBreakdown breakdown;

  const _CategoryBreakdownItem({required this.breakdown});

  @override
  Widget build(BuildContext context) {
    return ListTile(
      leading: Text(
        breakdown.icon,
        style: const TextStyle(fontSize: 24),
      ),
      title: Text(breakdown.categoryName),
      subtitle: Text('${breakdown.transactionCount}ç¬”äº¤æ˜“'),
      trailing: Column(
        mainAxisAlignment: MainAxisAlignment.center,
        crossAxisAlignment: CrossAxisAlignment.end,
        children: [
          Text(
            'Â¥${breakdown.amount}',
            style: const TextStyle(
              fontWeight: FontWeight.bold,
              fontSize: 16,
            ),
          ),
          Text(
            '${breakdown.percentage.toStringAsFixed(1)}%',
            style: TextStyle(
              fontSize: 12,
              color: Colors.grey[600],
            ),
          ),
        ],
      ),
    );
  }
}

class _ComparisonRow extends StatelessWidget {
  final String label;
  final double change;

  const _ComparisonRow({
    required this.label,
    required this.change,
  });

  @override
  Widget build(BuildContext context) {
    final isPositive = change >= 0;
    final color = isPositive ? Colors.green : Colors.red;
    final icon = isPositive ? Icons.arrow_upward : Icons.arrow_downward;

    return Row(
      mainAxisAlignment: MainAxisAlignment.spaceBetween,
      children: [
        Text(label),
        Row(
          children: [
            Icon(icon, color: color, size: 16),
            const SizedBox(width: 4),
            Text(
              '${change.abs().toStringAsFixed(1)}%',
              style: TextStyle(
                color: color,
                fontWeight: FontWeight.bold,
              ),
            ),
          ],
        ),
      ],
    );
  }
}
```

### 2. é¢„ç®—è¿›åº¦ç»„ä»¶

```dart
// lib/features/analytics/presentation/widgets/budget_progress_widget.dart

import 'package:flutter/material.dart';
import 'package:flutter_riverpod/flutter_riverpod.dart';
import '../../application/use_cases/get_budget_progress_use_case.dart';
import '../../domain/models/budget_progress.dart';

class BudgetProgressWidget extends ConsumerWidget {
  final String bookId;

  const BudgetProgressWidget({
    super.key,
    required this.bookId,
  });

  @override
  Widget build(BuildContext context, WidgetRef ref) {
    final now = DateTime.now();
    final progressListAsync = ref.watch(budgetProgressListProvider(
      bookId: bookId,
      year: now.year,
      month: now.month,
    ));

    return progressListAsync.when(
      data: (progressList) {
        if (progressList.isEmpty) {
          return const Card(
            child: Padding(
              padding: EdgeInsets.all(16),
              child: Text('æš‚æ— é¢„ç®—è®¾ç½®'),
            ),
          );
        }

        return Card(
          child: Padding(
            padding: const EdgeInsets.all(16),
            child: Column(
              crossAxisAlignment: CrossAxisAlignment.start,
              children: [
                const Text(
                  'é¢„ç®—è¿›åº¦',
                  style: TextStyle(fontSize: 18, fontWeight: FontWeight.bold),
                ),
                const SizedBox(height: 16),
                ...progressList.map((progress) {
                  return _BudgetProgressItem(progress: progress);
                }),
              ],
            ),
          ),
        );
      },
      loading: () => const Center(child: CircularProgressIndicator()),
      error: (error, stack) => Text('é”™è¯¯: $error'),
    );
  }
}

class _BudgetProgressItem extends StatelessWidget {
  final BudgetProgress progress;

  const _BudgetProgressItem({required this.progress});

  @override
  Widget build(BuildContext context) {
    final color = _getStatusColor(progress.status);

    return Padding(
      padding: const EdgeInsets.only(bottom: 16),
      child: Column(
        crossAxisAlignment: CrossAxisAlignment.start,
        children: [
          Row(
            mainAxisAlignment: MainAxisAlignment.spaceBetween,
            children: [
              Text(
                progress.categoryName,
                style: const TextStyle(fontWeight: FontWeight.bold),
              ),
              Text(
                'Â¥${progress.spentAmount} / Â¥${progress.budgetAmount}',
                style: TextStyle(
                  color: color,
                  fontWeight: FontWeight.bold,
                ),
              ),
            ],
          ),
          const SizedBox(height: 8),
          LinearProgressIndicator(
            value: progress.percentage / 100,
            backgroundColor: Colors.grey[200],
            valueColor: AlwaysStoppedAnimation<Color>(color),
            minHeight: 8,
          ),
          const SizedBox(height: 4),
          Row(
            mainAxisAlignment: MainAxisAlignment.spaceBetween,
            children: [
              Text(
                '${progress.percentage.toStringAsFixed(1)}%',
                style: TextStyle(fontSize: 12, color: color),
              ),
              if (progress.remainingAmount > 0)
                Text(
                  'å‰©ä½™: Â¥${progress.remainingAmount}',
                  style: const TextStyle(fontSize: 12, color: Colors.grey),
                )
              else
                Text(
                  'è¶…æ”¯: Â¥${progress.remainingAmount.abs()}',
                  style: const TextStyle(fontSize: 12, color: Colors.red),
                ),
            ],
          ),
        ],
      ),
    );
  }

  Color _getStatusColor(BudgetStatus status) {
    switch (status) {
      case BudgetStatus.safe:
        return Colors.green;
      case BudgetStatus.warning:
        return Colors.orange;
      case BudgetStatus.exceeded:
        return Colors.red;
    }
  }
}
```

---

## æµ‹è¯•ç­–ç•¥

### å•å…ƒæµ‹è¯•

```dart
// test/features/analytics/application/use_cases/get_monthly_report_use_case_test.dart

import 'package:flutter_test/flutter_test.dart';
import 'package:mockito/mockito.dart';
import 'package:mockito/annotations.dart';

@GenerateMocks([TransactionRepository, CategoryRepository])
import 'get_monthly_report_use_case_test.mocks.dart';

void main() {
  group('GetMonthlyReportUseCase', () {
    late GetMonthlyReportUseCase useCase;
    late MockTransactionRepository mockTransactionRepo;
    late MockCategoryRepository mockCategoryRepo;

    setUp(() {
      mockTransactionRepo = MockTransactionRepository();
      mockCategoryRepo = MockCategoryRepository();
      useCase = GetMonthlyReportUseCase(
        transactionRepo: mockTransactionRepo,
        categoryRepo: mockCategoryRepo,
      );
    });

    test('should calculate correct monthly totals', () async {
      // Given
      final transactions = [
        Transaction(
          id: '1',
          type: TransactionType.income,
          amount: 100000,
          // ... other fields
        ),
        Transaction(
          id: '2',
          type: TransactionType.expense,
          amount: 30000,
          // ... other fields
        ),
        Transaction(
          id: '3',
          type: TransactionType.expense,
          amount: 20000,
          // ... other fields
        ),
      ];

      when(mockTransactionRepo.getTransactionsByDateRange(
        bookId: anyNamed('bookId'),
        startDate: anyNamed('startDate'),
        endDate: anyNamed('endDate'),
      )).thenAnswer((_) async => transactions);

      // When
      final report = await useCase.execute(
        bookId: 'book-1',
        year: 2026,
        month: 2,
      );

      // Then
      expect(report.totalIncome, 100000);
      expect(report.totalExpenses, 50000);
      expect(report.savings, 50000);
      expect(report.savingsRate, 50.0);
    });
  });
}
```

---

## æ€§èƒ½ä¼˜åŒ–

### ä¼˜åŒ–ç­–ç•¥

**1. æ•°æ®èšåˆä¼˜åŒ–:**
- ä½¿ç”¨SQL GROUP BYå‡å°‘è®¡ç®—
- ç¼“å­˜æœˆåº¦ç»Ÿè®¡ç»“æœ
- åå°é¢„åŠ è½½ä¸‹æœˆæ•°æ®

**2. å›¾è¡¨æ¸²æŸ“ä¼˜åŒ–:**
- æ•°æ®é‡‡æ ·(å¤§æ•°æ®é›†)
- å»¶è¿ŸåŠ è½½è¯¦ç»†æ•°æ®
- ä½¿ç”¨Canvasç»˜åˆ¶æå‡æ€§èƒ½

**3. å†…å­˜ä¼˜åŒ–:**
- åˆ†é¡µåŠ è½½äº¤æ˜“åˆ—è¡¨
- é™åˆ¶å›¾è¡¨æ•°æ®ç‚¹æ•°é‡
- åŠæ—¶é‡Šæ”¾ä¸ç”¨çš„æ•°æ®

---

## éªŒæ”¶æ ‡å‡†

### åŠŸèƒ½éœ€æ±‚

- âœ… æœˆåº¦æŠ¥è¡¨ç”Ÿæˆæ—¶é—´<2ç§’(1000æ¡äº¤æ˜“)
- âœ… åˆ†ç±»é¥¼å›¾æ­£ç¡®æ˜¾ç¤ºå‰5å¤§åˆ†ç±»
- âœ… è¶‹åŠ¿æŠ˜çº¿å›¾æ˜¾ç¤ºå…¨æœˆæ¯æ—¥æ•°æ®
- âœ… é¢„ç®—è¿›åº¦å®æ—¶æ›´æ–°
- âœ… è¶…æ”¯æé†’åŠæ—¶æ¨é€

### æ€§èƒ½éœ€æ±‚

| æŒ‡æ ‡ | ç›®æ ‡ | å®é™… |
|------|------|------|
| æŠ¥è¡¨ç”Ÿæˆæ—¶é—´ | <2s | å¾…å®š |
| å›¾è¡¨æ¸²æŸ“æ—¶é—´ | <500ms | å¾…å®š |
| å†…å­˜å ç”¨ | <50MB | å¾…å®š |

---

## å¼€å‘æ—¶é—´çº¿ (8å¤©)

| å¤©æ•° | ä»»åŠ¡ | äº¤ä»˜ç‰© |
|------|------|--------|
| **ç¬¬1å¤©** | æ•°æ®æ¨¡å‹è®¾è®¡ | MonthlyReportã€BudgetProgressæ¨¡å‹ |
| **ç¬¬2å¤©** | æœˆåº¦æŠ¥è¡¨ç”¨ä¾‹ | GetMonthlyReportUseCase |
| **ç¬¬3å¤©** | é¢„ç®—è·Ÿè¸ªç”¨ä¾‹ | GetBudgetProgressUseCase |
| **ç¬¬4å¤©** | æœˆåº¦æŠ¥è¡¨UI | MonthlyReportScreen |
| **ç¬¬5å¤©** | å›¾è¡¨ç»„ä»¶ | é¥¼å›¾ã€æŠ˜çº¿å›¾ã€æŸ±çŠ¶å›¾ |
| **ç¬¬6å¤©** | é¢„ç®—è¿›åº¦ç»„ä»¶ | BudgetProgressWidget |
| **ç¬¬7å¤©** | å•å…ƒæµ‹è¯• | Use Caseæµ‹è¯• |
| **ç¬¬8å¤©** | é›†æˆæµ‹è¯•ä¸ä¼˜åŒ– | æ€§èƒ½ä¼˜åŒ–ã€æ–‡æ¡£ |

---

## å‚è€ƒèµ„æ–™

- [fl_chart](https://pub.dev/packages/fl_chart) - Flutterå›¾è¡¨åº“
- PRD_Module_BasicAccounting.md (éœ€æ±‚)
- 01_MVP_Complete_Architecture_Guide.md (æ¶æ„)

---

**æ–‡æ¡£çŠ¶æ€:** å®Œæˆ
**å®¡æ ¸çŠ¶æ€:** å¾…å®¡æ ¸
**å˜æ›´æ—¥å¿—:**
- 2026-02-03: åˆ›å»ºå®Œæ•´æŠ€æœ¯å®ç°æ–‡æ¡£ï¼ŒåŒ…å«æ‰€æœ‰ä»£ç ç¤ºä¾‹
